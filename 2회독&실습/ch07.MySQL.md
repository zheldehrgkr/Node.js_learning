# 07. 관계형 데이터베아스

## 데이터베이스

관련성을 가지며 중복이 없는 데이터들의 집합. 이러한 데이터베이스를 다루는 시스템을 DBMS, 그 중에서도 관계형 데이터베이스를 다루는 시스템을 RDBMS라고 한다. 대표적으로 오라클, MySQL 등이 있다.

## 설치

## db 생성하기

mysql 프롬프트에 접속한다.

CREATE SCHEMA [데이터베이스명]으로 생성한다.

```mysql
CREATE SCHEMA 'nodejs';
CREATE SCHEMA 'nodejs' DEFALUT CHARACTER SET utf8; // 한글 사용 가능 옵션
use nodejs; // 해당 db 사용 명령어
```

## 테이블

데이터가 들어갈 수 있는 틀을 의미하는 테이블을 만든다. CREATE TABLE [데이터베이스명.테이블명] 으로 작성하며 이어지는 ()안에 컬럼 설정이 가능하다.

- 컬럼 : DB의 세로줄을 의미하며 한 가지에 대한 정보가 들어있다.
- 로우 : DB의 가로줄을 의미하며 각 컬럼에 맞춘 데이터 1개씩을 모은 것이다.

```
CREATE TABLE nodejs.users (
    // 컬럼 이름 자료형 옵션 의 형식으로 작성한다.
    id INT NOT NULL AUTO_INCREMENT,
    name VARCHAR(20) NOT NULL,
    ...)
    // 컬럼 설정이 끝난 후에 테이블에 대한 설정을 할 수 있다.
    DEFAULT CHARACTER SET = utf8
    ENGINE = InnoDB; // 세미콜론으로 끝을 알린다.
```

- [ ] 상세 설정들의 역할 정리

테이블 정보 확인과 삭제는 다음과 같다.

```
DESC 테이블명; // 정보 확인
DROP TABLE 테이블명; // 테이블 제거
```

## CRUD

쓰기, 읽기, 수정, 삭제의 4가지 작업이며 데이터베이스에서 주로 하게되는 작업이다.

## Create

데이터를 생성해서 db에 넣는 작업이다.  
INSERT INTO [테이블명] ([컬럼1], [컬럼2], ...) VALUES ([값1], [값2], ...) 으로 사용한다.
해당 테이블에 적은 컬럼 순서대로 적은 값을 순서대로 넣는다.

## Read

db에 있는 데이터를 조회하는 작업이다.

SELECT [컬럼이름] FROM [테이블명] 으로 조회한다. 전체를 조회하고 싶다면 컬럼이름 대신 \* 을 넣으면 된다.

```
SELECT name, age FROM nodejs.users;
```

마지막에 WHERE로 조건을 걸어줄 수 있다.

```
SELECT name, age FROM nodejs.users WHERE age > 30; // age > 30 인 조건을 만족하는 로우의 name, age 데이터를 반환한다.
```

ORDER BY 로 정렬, LIMIT 로 조회할 개수 설정, OFFSET으로 건너뛸 개수 조정도 가능하다.

## Update

db 에 있는 데이터를 수정한다.  
UPDATE [테이블명] SET [컬럼명 = 바꿀 값] WHERE [조건] 으로 사용한다.

```
UPDATE nodejs.users SET comment = '수정' WHERE id = 2; // users 테이블에서 id가 2인 로우의 comment 데이터를 수정 으로 바꾼다.
```

## Delete

db에 있는 데이터를 삭제한다.  
DELETE FROM [테이블명] WHERE [조건] 으로 사용한다.

```
DELETE FROM nodejs.users WHERE id = 2; // users 테이블에서 id가 2인 로우를 삭제한다.
```

## 시퀄라이즈

노드에서 mysql 작업을 쉽게 할 수 있도록 도와주는 라이브러리이다. 이 라이브러리를 사용하면 js 구문을 sql로 바꾸어 주기 때문에 js 만으로 mysql 조작이 가능하다. js 객체와 데이터베이스 릴레이션(정보 저장의 기본 단위)를 매핑시켜주는 ORM 이라는 도구이다.

새 node 프로젝트 생성 후 npm 으로 설치후 실행한다.

```bash
npm i sequelize sequelize-cli
sequelize init
```

init의 결과로 config, models, migrations. seeders 폴더가 생성된다.
