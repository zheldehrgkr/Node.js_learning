# 01. Node.js 소개

**Node.js는 크롬 v8 js 엔진으로 빌드된 js 런타임이다.**

## 서버

클라이언트의 요청에 대한 응답을 하는 컴퓨터(또는 프로그램). 노드는 서버 구축을 하는데 많이 쓰인다.(런타임이기 때문에 다른 용도로도 가능하다)

## js 런타임

런타임은 특정 언어를 실행하는 환경으로 노드의 등장으로 웹 브라우저에서만 실행할 수 있었던 js를 컴퓨터에서도 실행할 수 있게 되었다. 노드는 2008냔 구글에서 크롬을 출시할 때 사용된 v8 엔진을 기반으로 만들어졌다.

## 이벤트 기반

노드는 따라서 js와 마찬가지로 이벤트 기반으로 작동한다. 이는 이벤트가 발생하면 리스너에 등록된 콜백 함수가 호출하는 식으로 동작한다는 것을 말한다. 이벤트 루프 등 js의 구조와 관련된 내용은 js 책에서 공부하자.

## 논 블로킹 I/O

노드는 특정 작업들, 예컨대 I/O 작업같은 것은 여러개 있어도 동시에 처리할 수 있다. 이러한 작업들은 백그라운드로 넘겨져 처리가 되므로, I/O 같은 작업들은 최대한 묶어서 한꺼번에 백그라운드로 넘겨야 시간을 절약할 수 있다. (따로따로 하면 시간이 그만큼 더 걸릴 테니까)

이러한 작업들은 논 블로킹 방식으로 코딩하여서, 즉 I/O 작업들은 콜백 등을 사용해서 태스크 큐로 보내게 되면 뒤에 작업이 방해 받지 않고 바로 실행되고 I/O 작업들은 여러개가 있어도 동시에 백그라운드에서 처리가 가능하니 시간을 아낄 수 있다.

```js
// 블로킹 방식
작업1();
오래걸리는작업();
작업2();

// 논 블로킹 방식
작업1();
setImmediate(오래걸리는작업);
작업2();
```

물론 일반적인 작업의 경우 어차피 한 번에 한 작업만 진행되므로 논 블로킹 방식으로 코딩해도 코드의 전체 실행시간이 줄지는 않겠지만 간단한 작업들이 오래 대기하는 것을 막을 수 있다는 점에서 의의가 있다.

## 싱글 스레드

노드는 싱글 스레드로 동작한다.

- 프로세스 : 운영체제에서 할당하는 작업의 단위
- 스레드 : 프로세스 내에서 실행되는 흐름의 단위.

노드를 실행하면 프로세스가 1개 생성되고, 그 안에서 스레드들이 작동한다. 이 때 여러개의 스레드가 생성되지만, 직접 조작할 수 있는 스레드는 하나 뿐이므로 노드는 싱글 스레드로 작동한다고 한다.

기본적으로 싱글 스레드로 동작하지만, 예외가 2가지 있다.

- 스레드풀 : 노드가 특정 동작(암호화, I/O, 압축)을 수행할 떄는 스스로 멀티 스레드를 사용한다.
- 워커 스레드 : 이걸 사용하면 직접 멀티 스레드를 다룰 수 있다.

## 서버로서의 노드

위와 같은 노드의 특징에 기반하여, 서버로서의 노드의 장단점에 대하여 알 수 있다.

노드는 I/O 작업을 논 블로킹으로 코딩하면 효율적으로 처리할 수 있으므로, I/O 요청이 많은 서버에 사용하면 좋다.  
하지만 싱글 스레드로 동작하므로 cpu 연산이 많이 요구되는 경우 불리하며 하바뿐인 서버에 멈추지 않게 에러 처리등을 잘 해야 한다.  
따라서 개수는 많지만 작은 데이터들을 실시간으로 주고받는데 적합하다. 실시간 채팅, 주식 차트, API 서버 등에 많이 사용한다.

워커 스레드로 멀티 스레딩을 할 수 있게 되었지만, 프로그래밍이 어렵고 그럼에도 불구하고 다른 언어들에 비해서는 속도가 많이 느리므로 여전히 cpu 연산이 많은 경우 권장하지 않는다.

웹 서버가 내장되어 있고, JSON을 다루기 쉬우며, 브라우저에서 사용하는 js를 사용하므로 백/프론트를 같은 언어로 만들 수 있어서 생산성이 좋다.

## 서버 이외의 노드

노드는 런타임일 뿐이므로, 서버 이외에서도 사용할 수가 있다.

- 웹 프레임워크 : 앵귤러, 리액트, 뷰 등
- 모바일 개발도구 : 리액트 네이티브
- 데스크톱 개발도구 : 일렉트론

- [ ] 논 블로킹 코딩방식에 대한 정확한 이해
